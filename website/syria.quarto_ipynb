{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "ebc8b8ef",
   "metadata": {},
   "source": [
    "---\n",
    "title: \"Security Incidents in Palestine: Trends and Patterns (2002-2025)\"\n",
    "format:\n",
    "  html:\n",
    "    toc: true\n",
    "    toc-depth: 3\n",
    "    code-fold: true\n",
    "    number-sections: true\n",
    "    theme: cosmo\n",
    "    fig-width: 9\n",
    "    fig-height: 6\n",
    "    fig-dpi: 300\n",
    "    self-contained: true\n",
    "execute:\n",
    "  warning: false\n",
    "  message: false\n",
    "editor: visual\n",
    "---"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "setup",
   "metadata": {},
   "outputs": [],
   "source": [
    "#| label: setup\n",
    "#| include: false\n",
    "\n",
    "# Import required libraries\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "import matplotlib.pyplot as plt\n",
    "import seaborn as sns\n",
    "import folium\n",
    "from folium.plugins import MarkerCluster\n",
    "from matplotlib.colors import LinearSegmentedColormap\n",
    "import warnings\n",
    "import plotly.express as px\n",
    "import plotly.graph_objects as go\n",
    "from IPython.display import display\n",
    "from scipy import stats\n",
    "\n",
    "# Configure plot settings\n",
    "plt.rcParams['figure.figsize'] = (10, 6)\n",
    "warnings.filterwarnings('ignore', category=FutureWarning)\n",
    "sns.set_theme(style=\"whitegrid\")\n",
    "\n",
    "# Set consistent color palette\n",
    "palette = {\"primary\": \"#FFBD59\", \"secondary\": \"#64C1FF\", \"danger\": \"#FF5252\"}\n",
    "\n",
    "# Load and prepare data\n",
    "df = pd.read_csv(\"data/security_incidents_cleaned.csv\")\n",
    "country_data = df[df['country'] == 'Syrian Arab Republic']"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "1878bae8",
   "metadata": {},
   "source": [
    "# Executive Summary\n",
    "\n",
    "# Background: The Conflict\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "5deb88fd",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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NXWZeL001ABfPv7oQRF/xPy8UY01dZl4vKPrGL0rrM0kcxRN7pjTV1mXi9KFV9hhNFAUn9d74vsQEj001dZl4vTTV1mXi9NNXWZeL001dZl4vTTV1mXi9NNXWZeL001dZl4vTTV1mXi9NNXWZeL001dZl4vTTV1mXi9NNXWZeL001dZl4vTTV1mXi9NNXWZeL001dZl4vTTVq64AshsGbiuQZhHYM3FcgzCOwZuK5BmEdgzcVyDMI7Bm4rkGYR2DNxXIMwjsGbiuQZhHYM3FcgzCOwZuK5BmEdgzcVyDMI7Bm4rkGYR2DNxXIMwjsGbiuQZhHYM3FcgzCOwZuK5BmEdgzcVyDMI7Bm5IBSjGmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy8Xppq6zLxemmrrMvF6aausy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",
      "text/plain": [
       "<IPython.core.display.Image object>"
      ]
     },
     "execution_count": 2,
     "metadata": {
      "image/png": {
       "width": 500
      }
     },
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from IPython.display import Image\n",
    "Image(\"images/syria.png\", width=500)"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "a60b30eb",
   "metadata": {},
   "source": [
    "## Historical Context\n",
    "\n",
    "## Recent Escalation\n",
    "\n",
    "# Temporal Trends in Security Incidents {#sec-temporal}\n",
    "\n",
    "## Incident Frequency Over Time\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "fig-yearly-incidents",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "        <script type=\"text/javascript\">\n",
       "        window.PlotlyConfig = {MathJaxConfig: 'local'};\n",
       "        if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});}\n",
       "        if (typeof require !== 'undefined') {\n",
       "        require.undef(\"plotly\");\n",
       "        requirejs.config({\n",
       "            paths: {\n",
       "                'plotly': ['https://cdn.plot.ly/plotly-2.35.2.min']\n",
       "            }\n",
       "        });\n",
       "        require(['plotly'], function(Plotly) {\n",
       "            window._Plotly = Plotly;\n",
       "        });\n",
       "        }\n",
       "        </script>\n",
       "        "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<div>                            <div id=\"d79aff09-1b0a-41e0-a22e-c49f2b14f0fa\" class=\"plotly-graph-div\" style=\"height:500px; width:100%;\"></div>            <script type=\"text/javascript\">                require([\"plotly\"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById(\"d79aff09-1b0a-41e0-a22e-c49f2b14f0fa\")) {                    Plotly.newPlot(                        \"d79aff09-1b0a-41e0-a22e-c49f2b14f0fa\",                        [{\"hovertemplate\":\"Year=%{x}\\u003cbr\\u003eNumber of Incidents=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"line\":{\"color\":\"#636efa\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines+markers\",\"name\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"x\":[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025],\"xaxis\":\"x\",\"y\":[1,13,33,27,11,24,30,47,47,44,22,16,11,16,5],\"yaxis\":\"y\",\"type\":\"scatter\"}],                        {\"template\":{\"data\":{\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"choropleth\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"choropleth\"}],\"contourcarpet\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"contourcarpet\"}],\"contour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"contour\"}],\"heatmapgl\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmapgl\"}],\"heatmap\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmap\"}],\"histogram2dcontour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2dcontour\"}],\"histogram2d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2d\"}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"mesh3d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"mesh3d\"}],\"parcoords\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"parcoords\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}],\"scatter3d\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatter3d\"}],\"scattercarpet\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattercarpet\"}],\"scattergeo\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergeo\"}],\"scattergl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergl\"}],\"scattermapbox\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermapbox\"}],\"scatterpolargl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolargl\"}],\"scatterpolar\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolar\"}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"scatterternary\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterternary\"}],\"surface\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"surface\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}]},\"layout\":{\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"autotypenumbers\":\"strict\",\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]],\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]},\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"geo\":{\"bgcolor\":\"white\",\"lakecolor\":\"white\",\"landcolor\":\"white\",\"showlakes\":true,\"showland\":true,\"subunitcolor\":\"#C8D4E3\"},\"hoverlabel\":{\"align\":\"left\"},\"hovermode\":\"closest\",\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"white\",\"polar\":{\"angularaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"radialaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"}},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"yaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"zaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"ternary\":{\"aaxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"caxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"}},\"title\":{\"x\":0.05},\"xaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2},\"yaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Year\"},\"tickmode\":\"linear\",\"dtick\":2,\"rangeslider\":{\"visible\":true}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Number of Incidents\"},\"zeroline\":true},\"legend\":{\"tracegroupgap\":0},\"height\":500,\"title\":{},\"hovermode\":\"x unified\",\"annotations\":[{\"arrowhead\":1,\"ax\":0,\"ay\":-20,\"bgcolor\":\"rgba(255,255,255,0.85)\",\"bordercolor\":\"black\",\"borderpad\":3,\"borderwidth\":1,\"font\":{\"size\":10},\"showarrow\":true,\"text\":\"Hamas takes control of Gaza\",\"x\":2006,\"y\":5},{\"arrowhead\":1,\"ax\":0,\"ay\":-20,\"bgcolor\":\"rgba(255,255,255,0.85)\",\"bordercolor\":\"black\",\"borderpad\":3,\"borderwidth\":1,\"font\":{\"size\":10},\"showarrow\":true,\"text\":\"Israel-Hamas conflict\",\"x\":2014,\"y\":10},{\"arrowhead\":1,\"ax\":0,\"ay\":-20,\"bgcolor\":\"rgba(255,255,255,0.85)\",\"bordercolor\":\"black\",\"borderpad\":3,\"borderwidth\":1,\"font\":{\"size\":10},\"showarrow\":true,\"text\":\"Gaza border protests\",\"x\":2018,\"y\":8},{\"arrowhead\":1,\"ax\":0,\"ay\":-20,\"bgcolor\":\"rgba(255,255,255,0.85)\",\"bordercolor\":\"black\",\"borderpad\":3,\"borderwidth\":1,\"font\":{\"size\":10},\"showarrow\":true,\"text\":\"11-day conflict\",\"x\":2021,\"y\":7},{\"arrowhead\":1,\"ax\":0,\"ay\":-20,\"bgcolor\":\"rgba(255,255,255,0.85)\",\"bordercolor\":\"black\",\"borderpad\":3,\"borderwidth\":1,\"font\":{\"size\":10},\"showarrow\":true,\"text\":\"Oct 7 Hamas attack\",\"x\":2023,\"y\":15},{\"arrowhead\":1,\"ax\":0,\"ay\":-20,\"bgcolor\":\"rgba(255,255,255,0.85)\",\"bordercolor\":\"black\",\"borderpad\":3,\"borderwidth\":1,\"font\":{\"size\":10},\"showarrow\":true,\"text\":\"Gaza war escalation\",\"x\":2024,\"y\":65}]},                        {\"responsive\": true}                    ).then(function(){\n",
       "                            \n",
       "var gd = document.getElementById('d79aff09-1b0a-41e0-a22e-c49f2b14f0fa');\n",
       "var x = new MutationObserver(function (mutations, observer) {{\n",
       "        var display = window.getComputedStyle(gd).display;\n",
       "        if (!display || display === 'none') {{\n",
       "            console.log([gd, 'removed!']);\n",
       "            Plotly.purge(gd);\n",
       "            observer.disconnect();\n",
       "        }}\n",
       "}});\n",
       "\n",
       "// Listen for the removal of the full notebook cells\n",
       "var notebookContainer = gd.closest('#notebook-container');\n",
       "if (notebookContainer) {{\n",
       "    x.observe(notebookContainer, {childList: true});\n",
       "}}\n",
       "\n",
       "// Listen for the clearing of the current output cell\n",
       "var outputEl = gd.closest('.output');\n",
       "if (outputEl) {{\n",
       "    x.observe(outputEl, {childList: true});\n",
       "}}\n",
       "\n",
       "                        })                };                });            </script>        </div>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "#| label: fig-yearly-incidents\n",
    "#| fig-cap: Security incidents in Palestine from 2002 to 2025\n",
    "#| echo: false\n",
    "\n",
    "# Group incidents by year\n",
    "yearly_incidents = country_data.groupby('year').size().reset_index(name='incidents')\n",
    "\n",
    "# Create line chart\n",
    "fig = px.line(\n",
    "    yearly_incidents, \n",
    "    x='year', \n",
    "    y='incidents',\n",
    "    markers=True,\n",
    "    labels={'incidents': 'Number of Incidents', 'year': 'Year'},\n",
    "    height=500\n",
    ")\n",
    "\n",
    "# Configure layout\n",
    "fig.update_layout(\n",
    "    title=None,\n",
    "    xaxis=dict(tickmode='linear', dtick=2),\n",
    "    yaxis=dict(zeroline=True),\n",
    "    hovermode='x unified',\n",
    "    template='plotly_white'\n",
    ")\n",
    "\n",
    "# Add range slider\n",
    "fig.update_xaxes(rangeslider_visible=True)\n",
    "\n",
    "# Add event annotations\n",
    "events = [\n",
    "    {'year': 2006, 'event': 'Hamas takes control of Gaza', 'y_position': 5},\n",
    "    {'year': 2014, 'event': 'Israel-Hamas conflict', 'y_position': 10},\n",
    "    {'year': 2018, 'event': 'Gaza border protests', 'y_position': 8},\n",
    "    {'year': 2021, 'event': '11-day conflict', 'y_position': 7},\n",
    "    {'year': 2023, 'event': 'Oct 7 Hamas attack', 'y_position': 15},\n",
    "    {'year': 2024, 'event': 'Gaza war escalation', 'y_position': 65}\n",
    "]\n",
    "\n",
    "for event in events:\n",
    "    fig.add_annotation(\n",
    "        x=event['year'],\n",
    "        y=event['y_position'],\n",
    "        text=event['event'],\n",
    "        showarrow=True,\n",
    "        arrowhead=1,\n",
    "        ax=0,\n",
    "        ay=-20,\n",
    "        font=dict(size=10),\n",
    "        bgcolor=\"rgba(255,255,255,0.85)\",\n",
    "        bordercolor=\"black\",\n",
    "        borderwidth=1,\n",
    "        borderpad=3\n",
    "    )\n",
    "\n",
    "fig.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "91a9e9d8",
   "metadata": {},
   "source": [
    "### Analysis of Incident Trends\n",
    "\n",
    "## Effected Indivudals Over Time\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "fig-yearly-affected",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>                            <div id=\"c1d918ab-9382-4332-a1ec-228b1cf036e9\" class=\"plotly-graph-div\" style=\"height:500px; width:100%;\"></div>            <script type=\"text/javascript\">                require([\"plotly\"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById(\"c1d918ab-9382-4332-a1ec-228b1cf036e9\")) {                    Plotly.newPlot(                        \"c1d918ab-9382-4332-a1ec-228b1cf036e9\",                        [{\"hovertemplate\":\"Year=%{x}\\u003cbr\\u003eTotal Affected Individuals=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"line\":{\"color\":\"#636efa\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines+markers\",\"name\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"x\":[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025],\"xaxis\":\"x\",\"y\":[3,17,58,45,14,43,52,68,86,85,52,18,14,26,6],\"yaxis\":\"y\",\"type\":\"scatter\"}],                        {\"template\":{\"data\":{\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"choropleth\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"choropleth\"}],\"contourcarpet\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"contourcarpet\"}],\"contour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"contour\"}],\"heatmapgl\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmapgl\"}],\"heatmap\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmap\"}],\"histogram2dcontour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2dcontour\"}],\"histogram2d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2d\"}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"mesh3d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"mesh3d\"}],\"parcoords\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"parcoords\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}],\"scatter3d\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatter3d\"}],\"scattercarpet\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattercarpet\"}],\"scattergeo\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergeo\"}],\"scattergl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergl\"}],\"scattermapbox\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermapbox\"}],\"scatterpolargl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolargl\"}],\"scatterpolar\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolar\"}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"scatterternary\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterternary\"}],\"surface\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"surface\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}]},\"layout\":{\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"autotypenumbers\":\"strict\",\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]],\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]},\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"geo\":{\"bgcolor\":\"white\",\"lakecolor\":\"white\",\"landcolor\":\"white\",\"showlakes\":true,\"showland\":true,\"subunitcolor\":\"#C8D4E3\"},\"hoverlabel\":{\"align\":\"left\"},\"hovermode\":\"closest\",\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"white\",\"polar\":{\"angularaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"radialaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"}},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"yaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"zaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"ternary\":{\"aaxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"caxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"}},\"title\":{\"x\":0.05},\"xaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2},\"yaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Year\"},\"tickmode\":\"linear\",\"dtick\":2,\"rangeslider\":{\"visible\":true}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Total Affected Individuals\"},\"zeroline\":true},\"legend\":{\"tracegroupgap\":0},\"height\":500,\"title\":{},\"hovermode\":\"x unified\"},                        {\"responsive\": true}                    ).then(function(){\n",
       "                            \n",
       "var gd = document.getElementById('c1d918ab-9382-4332-a1ec-228b1cf036e9');\n",
       "var x = new MutationObserver(function (mutations, observer) {{\n",
       "        var display = window.getComputedStyle(gd).display;\n",
       "        if (!display || display === 'none') {{\n",
       "            console.log([gd, 'removed!']);\n",
       "            Plotly.purge(gd);\n",
       "            observer.disconnect();\n",
       "        }}\n",
       "}});\n",
       "\n",
       "// Listen for the removal of the full notebook cells\n",
       "var notebookContainer = gd.closest('#notebook-container');\n",
       "if (notebookContainer) {{\n",
       "    x.observe(notebookContainer, {childList: true});\n",
       "}}\n",
       "\n",
       "// Listen for the clearing of the current output cell\n",
       "var outputEl = gd.closest('.output');\n",
       "if (outputEl) {{\n",
       "    x.observe(outputEl, {childList: true});\n",
       "}}\n",
       "\n",
       "                        })                };                });            </script>        </div>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "#| label: fig-yearly-affected\n",
    "#| fig-cap: Total affected individuals in Palestine from 2002 to 2025\n",
    "#| echo: false\n",
    "\n",
    "# Group by year and sum total_affected\n",
    "yearly_affected = (\n",
    "    country_data.groupby('year')['total_affected']\n",
    "    .sum()\n",
    "    .reset_index()\n",
    "    .rename(columns={'total_affected': 'affected'})\n",
    ")\n",
    "\n",
    "# Create line chart\n",
    "fig = px.line(\n",
    "    yearly_affected, \n",
    "    x='year', \n",
    "    y='affected',\n",
    "    markers=True,\n",
    "    labels={'affected': 'Total Affected Individuals', 'year': 'Year'},\n",
    "    height=500\n",
    ")\n",
    "\n",
    "# Configure layout\n",
    "fig.update_layout(\n",
    "    title=None,\n",
    "    xaxis=dict(tickmode='linear', dtick=2),\n",
    "    yaxis=dict(zeroline=True),\n",
    "    hovermode='x unified',\n",
    "    template='plotly_white'\n",
    ")\n",
    "\n",
    "# Add range slider\n",
    "fig.update_xaxes(rangeslider_visible=True)\n",
    "\n",
    "fig.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "47012871",
   "metadata": {},
   "source": [
    "### Analysis of Humans Impacted\n",
    "\n",
    "# Nature of Security Incidents {#sec-nature}\n",
    "\n",
    "## Predominant Attack Types\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "fig-attack-types",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>                            <div id=\"5ad2ad13-b7ec-4c7f-bfd4-1eb237df64fa\" class=\"plotly-graph-div\" style=\"height:500px; width:100%;\"></div>            <script type=\"text/javascript\">                require([\"plotly\"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById(\"5ad2ad13-b7ec-4c7f-bfd4-1eb237df64fa\")) {                    Plotly.newPlot(                        \"5ad2ad13-b7ec-4c7f-bfd4-1eb237df64fa\",                        [{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Count=%{x}\\u003cbr\\u003eAttack Type=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#FFBD59\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"h\",\"showlegend\":false,\"textposition\":\"auto\",\"x\":[120,62,46,39,19,19,12,8,8,7],\"xaxis\":\"x\",\"y\":[\"Aerial bombardment\",\"Shelling\",\"Shooting\",\"Kidnapping\",\"Unknown\",\"Bodily assault\",\"Vehicle-born IED\",\"Roadside IED\",\"Kidnap-killing\",\"Landmine \"],\"yaxis\":\"y\",\"type\":\"bar\"}],                        {\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Number of Incidents\"}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{},\"categoryorder\":\"total ascending\"},\"legend\":{\"tracegroupgap\":0},\"barmode\":\"relative\",\"height\":500},                        {\"responsive\": true}                    ).then(function(){\n",
       "                            \n",
       "var gd = document.getElementById('5ad2ad13-b7ec-4c7f-bfd4-1eb237df64fa');\n",
       "var x = new MutationObserver(function (mutations, observer) {{\n",
       "        var display = window.getComputedStyle(gd).display;\n",
       "        if (!display || display === 'none') {{\n",
       "            console.log([gd, 'removed!']);\n",
       "            Plotly.purge(gd);\n",
       "            observer.disconnect();\n",
       "        }}\n",
       "}});\n",
       "\n",
       "// Listen for the removal of the full notebook cells\n",
       "var notebookContainer = gd.closest('#notebook-container');\n",
       "if (notebookContainer) {{\n",
       "    x.observe(notebookContainer, {childList: true});\n",
       "}}\n",
       "\n",
       "// Listen for the clearing of the current output cell\n",
       "var outputEl = gd.closest('.output');\n",
       "if (outputEl) {{\n",
       "    x.observe(outputEl, {childList: true});\n",
       "}}\n",
       "\n",
       "                        })                };                });            </script>        </div>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "#| label: fig-attack-types\n",
    "#| fig-cap: Most common types of attacks in Palestine\n",
    "#| echo: false\n",
    "\n",
    "# Analyzing means of attack\n",
    "attack_counts = country_data['means_of_attack'].value_counts().reset_index()\n",
    "attack_counts.columns = ['Attack Type', 'Count']\n",
    "attack_counts = attack_counts.sort_values('Count', ascending=False).head(10)\n",
    "\n",
    "# Create horizontal bar chart with uniform color\n",
    "fig_attacks = px.bar(\n",
    "    attack_counts,\n",
    "    y='Attack Type',\n",
    "    x='Count',\n",
    "    title=None,\n",
    "    height=500,\n",
    "    orientation='h'\n",
    ")\n",
    "\n",
    "# Set all bars to primary color\n",
    "fig_attacks.update_traces(marker_color=palette[\"primary\"])\n",
    "\n",
    "# Configure layout\n",
    "fig_attacks.update_layout(\n",
    "    yaxis={'categoryorder': 'total ascending'},\n",
    "    xaxis_title=\"Number of Incidents\",\n",
    "    yaxis_title=None\n",
    ")\n",
    "\n",
    "fig_attacks.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "b807851d",
   "metadata": {},
   "source": [
    "### Analysis of Attack Methods\n",
    "\n",
    "## Attack Contexts\n",
    "\n",
    "### Analysis of Attack Contexts\n",
    "\n",
    "# Human Impact of Security Incidents {#sec-impact}\n",
    "\n",
    "## Casualties by Category\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "fig-casualties",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>                            <div id=\"d7b9007b-85cc-4d7a-84f4-f14ec8e5c616\" class=\"plotly-graph-div\" style=\"height:500px; width:100%;\"></div>            <script type=\"text/javascript\">                require([\"plotly\"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById(\"d7b9007b-85cc-4d7a-84f4-f14ec8e5c616\")) {                    Plotly.newPlot(                        \"d7b9007b-85cc-4d7a-84f4-f14ec8e5c616\",                        [{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Status=Killed\\u003cbr\\u003eCategory=%{x}\\u003cbr\\u003eCount=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Killed\",\"marker\":{\"color\":\"#FF5252\",\"pattern\":{\"shape\":\"\"}},\"name\":\"Killed\",\"offsetgroup\":\"Killed\",\"orientation\":\"v\",\"showlegend\":true,\"textposition\":\"auto\",\"x\":[\"Nationals\",\"Internationals\"],\"xaxis\":\"x\",\"y\":[282,7],\"yaxis\":\"y\",\"type\":\"bar\"},{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Status=Wounded\\u003cbr\\u003eCategory=%{x}\\u003cbr\\u003eCount=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Wounded\",\"marker\":{\"color\":\"#FFBD59\",\"pattern\":{\"shape\":\"\"}},\"name\":\"Wounded\",\"offsetgroup\":\"Wounded\",\"orientation\":\"v\",\"showlegend\":true,\"textposition\":\"auto\",\"x\":[\"Nationals\",\"Internationals\"],\"xaxis\":\"x\",\"y\":[222,6],\"yaxis\":\"y\",\"type\":\"bar\"},{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Status=Kidnapped\\u003cbr\\u003eCategory=%{x}\\u003cbr\\u003eCount=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Kidnapped\",\"marker\":{\"color\":\"#64C1FF\",\"pattern\":{\"shape\":\"\"}},\"name\":\"Kidnapped\",\"offsetgroup\":\"Kidnapped\",\"orientation\":\"v\",\"showlegend\":true,\"textposition\":\"auto\",\"x\":[\"Nationals\",\"Internationals\"],\"xaxis\":\"x\",\"y\":[53,17],\"yaxis\":\"y\",\"type\":\"bar\"}],                        {\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Number of People\"}},\"legend\":{\"title\":{},\"tracegroupgap\":0},\"barmode\":\"stack\",\"height\":500},                        {\"responsive\": true}                    ).then(function(){\n",
       "                            \n",
       "var gd = document.getElementById('d7b9007b-85cc-4d7a-84f4-f14ec8e5c616');\n",
       "var x = new MutationObserver(function (mutations, observer) {{\n",
       "        var display = window.getComputedStyle(gd).display;\n",
       "        if (!display || display === 'none') {{\n",
       "            console.log([gd, 'removed!']);\n",
       "            Plotly.purge(gd);\n",
       "            observer.disconnect();\n",
       "        }}\n",
       "}});\n",
       "\n",
       "// Listen for the removal of the full notebook cells\n",
       "var notebookContainer = gd.closest('#notebook-container');\n",
       "if (notebookContainer) {{\n",
       "    x.observe(notebookContainer, {childList: true});\n",
       "}}\n",
       "\n",
       "// Listen for the clearing of the current output cell\n",
       "var outputEl = gd.closest('.output');\n",
       "if (outputEl) {{\n",
       "    x.observe(outputEl, {childList: true});\n",
       "}}\n",
       "\n",
       "                        })                };                });            </script>        </div>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "#| label: fig-casualties\n",
    "#| fig-cap: Total casualties in Palestine by category\n",
    "#| echo: false\n",
    "\n",
    "# Create data for stacked bar chart\n",
    "stacked_data = {\n",
    "    'Category': ['Nationals', 'Internationals'],\n",
    "    'Killed': [\n",
    "        country_data['nationals_killed'].sum(),\n",
    "        country_data['internationals_killed'].sum()\n",
    "    ],\n",
    "    'Wounded': [\n",
    "        country_data['nationals_wounded'].sum(),\n",
    "        country_data['internationals_wounded'].sum()\n",
    "    ],\n",
    "    'Kidnapped': [\n",
    "        country_data['nationals_kidnapped'].sum(),\n",
    "        country_data['internationals_kidnapped'].sum()\n",
    "    ]\n",
    "}\n",
    "\n",
    "# Convert to DataFrame and reshape for stacking\n",
    "stacked_df = pd.DataFrame(stacked_data)\n",
    "stacked_df_long = pd.melt(\n",
    "    stacked_df,\n",
    "    id_vars=['Category'],\n",
    "    value_vars=['Killed', 'Wounded', 'Kidnapped'],\n",
    "    var_name='Status',\n",
    "    value_name='Count'\n",
    ")\n",
    "\n",
    "# Create a stacked bar chart\n",
    "fig_stacked = px.bar(\n",
    "    stacked_df_long,\n",
    "    x='Category',\n",
    "    y='Count',\n",
    "    color='Status',\n",
    "    title=None,\n",
    "    barmode='stack',\n",
    "    height=500,\n",
    "    color_discrete_map={\n",
    "        'Killed': palette[\"danger\"], \n",
    "        'Wounded': palette[\"primary\"], \n",
    "        'Kidnapped': palette[\"secondary\"]\n",
    "    }\n",
    ")\n",
    "\n",
    "# Improve layout\n",
    "fig_stacked.update_layout(\n",
    "    xaxis_title=None,\n",
    "    yaxis_title=\"Number of People\",\n",
    "    legend_title_text=None\n",
    ")\n",
    "\n",
    "fig_stacked.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "175ab646",
   "metadata": {},
   "source": [
    "### Analysis of Casualty Patterns\n",
    "\n",
    "## Gender Distribution of Affected Individuals\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "fig-gender",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>                            <div id=\"0023cceb-3820-46e2-adbf-685ab0857627\" class=\"plotly-graph-div\" style=\"height:450px; width:100%;\"></div>            <script type=\"text/javascript\">                require([\"plotly\"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById(\"0023cceb-3820-46e2-adbf-685ab0857627\")) {                    Plotly.newPlot(                        \"0023cceb-3820-46e2-adbf-685ab0857627\",                        [{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Gender=%{x}\\u003cbr\\u003eCount=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#FFBD59\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"textposition\":\"auto\",\"x\":[\"Male\",\"Female\"],\"xaxis\":\"x\",\"y\":[431,23],\"yaxis\":\"y\",\"type\":\"bar\"}],                        {\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Number of Individuals\"}},\"legend\":{\"tracegroupgap\":0},\"barmode\":\"relative\",\"height\":450},                        {\"responsive\": true}                    ).then(function(){\n",
       "                            \n",
       "var gd = document.getElementById('0023cceb-3820-46e2-adbf-685ab0857627');\n",
       "var x = new MutationObserver(function (mutations, observer) {{\n",
       "        var display = window.getComputedStyle(gd).display;\n",
       "        if (!display || display === 'none') {{\n",
       "            console.log([gd, 'removed!']);\n",
       "            Plotly.purge(gd);\n",
       "            observer.disconnect();\n",
       "        }}\n",
       "}});\n",
       "\n",
       "// Listen for the removal of the full notebook cells\n",
       "var notebookContainer = gd.closest('#notebook-container');\n",
       "if (notebookContainer) {{\n",
       "    x.observe(notebookContainer, {childList: true});\n",
       "}}\n",
       "\n",
       "// Listen for the clearing of the current output cell\n",
       "var outputEl = gd.closest('.output');\n",
       "if (outputEl) {{\n",
       "    x.observe(outputEl, {childList: true});\n",
       "}}\n",
       "\n",
       "                        })                };                });            </script>        </div>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "#| label: fig-gender\n",
    "#| fig-cap: Gender distribution of affected individuals\n",
    "#| echo: false\n",
    "\n",
    "# Check if we have gender data\n",
    "gender_cols = ['gender_male', 'gender_female']\n",
    "if all(col in country_data.columns for col in gender_cols):\n",
    "    # Sum up total counts by gender\n",
    "    gender_totals = {\n",
    "        'Gender': ['Male', 'Female'],\n",
    "        'Count': [\n",
    "            country_data['gender_male'].sum(),\n",
    "            country_data['gender_female'].sum()\n",
    "        ]\n",
    "    }\n",
    "\n",
    "    # Convert to DataFrame\n",
    "    gender_df = pd.DataFrame(gender_totals)\n",
    "\n",
    "    # Create simple bar chart\n",
    "    fig_gender = px.bar(\n",
    "        gender_df,\n",
    "        x='Gender',\n",
    "        y='Count',\n",
    "        title=None,\n",
    "        height=450\n",
    "    )\n",
    "\n",
    "    # Set primary color for bars\n",
    "    fig_gender.update_traces(marker_color=palette[\"primary\"])\n",
    "\n",
    "    # Improve layout\n",
    "    fig_gender.update_layout(\n",
    "        xaxis_title=None,\n",
    "        yaxis_title=\"Number of Individuals\"\n",
    "    )\n",
    "\n",
    "    fig_gender.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "b3a61e75",
   "metadata": {},
   "source": [
    "### Analysis of Gender Patterns\n",
    "\n",
    "# Organizations and Actors {#sec-organizations}\n",
    "\n",
    "## Organizations Affected by Security Incidents\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "fig-organizations",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>                            <div id=\"af0e435e-e471-4012-968a-173ee16c0c5a\" class=\"plotly-graph-div\" style=\"height:500px; width:100%;\"></div>            <script type=\"text/javascript\">                require([\"plotly\"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById(\"af0e435e-e471-4012-968a-173ee16c0c5a\")) {                    Plotly.newPlot(                        \"af0e435e-e471-4012-968a-173ee16c0c5a\",                        [{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Total Incidents=%{x}\\u003cbr\\u003eOrganization=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#FFBD59\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"h\",\"showlegend\":false,\"textposition\":\"auto\",\"x\":[329,132,65,53,6,3],\"xaxis\":\"x\",\"y\":[\"National NGO\",\"International NGO\",\"National Red Cross\\u002fRed Crescent\",\"United Nations\",\"Int. Committee of Red Cross\",\"Other Organizations\"],\"yaxis\":\"y\",\"type\":\"bar\"}],                        {\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Number of Incidents\"}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{},\"categoryorder\":\"total ascending\"},\"legend\":{\"tracegroupgap\":0},\"barmode\":\"relative\",\"height\":500},                        {\"responsive\": true}                    ).then(function(){\n",
       "                            \n",
       "var gd = document.getElementById('af0e435e-e471-4012-968a-173ee16c0c5a');\n",
       "var x = new MutationObserver(function (mutations, observer) {{\n",
       "        var display = window.getComputedStyle(gd).display;\n",
       "        if (!display || display === 'none') {{\n",
       "            console.log([gd, 'removed!']);\n",
       "            Plotly.purge(gd);\n",
       "            observer.disconnect();\n",
       "        }}\n",
       "}});\n",
       "\n",
       "// Listen for the removal of the full notebook cells\n",
       "var notebookContainer = gd.closest('#notebook-container');\n",
       "if (notebookContainer) {{\n",
       "    x.observe(notebookContainer, {childList: true});\n",
       "}}\n",
       "\n",
       "// Listen for the clearing of the current output cell\n",
       "var outputEl = gd.closest('.output');\n",
       "if (outputEl) {{\n",
       "    x.observe(outputEl, {childList: true});\n",
       "}}\n",
       "\n",
       "                        })                };                });            </script>        </div>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "#| label: fig-organizations\n",
    "#| fig-cap: Security incidents by organization type\n",
    "#| echo: false\n",
    "\n",
    "# Count incidents affecting different organization types\n",
    "org_cols = ['un', 'ingo', 'icrc', 'nrcs_and_ifrc', 'nngo', 'other']\n",
    "\n",
    "# Create a summary of total incidents by organization type\n",
    "org_totals = country_data[org_cols].sum().reset_index()\n",
    "org_totals.columns = ['Organization Type', 'Total Incidents']\n",
    "\n",
    "# Better labels for organization types\n",
    "org_labels = {\n",
    "    'un': 'United Nations',\n",
    "    'ingo': 'International NGO',\n",
    "    'icrc': 'Int. Committee of Red Cross',\n",
    "    'nrcs_and_ifrc': 'National Red Cross/Red Crescent',\n",
    "    'nngo': 'National NGO',\n",
    "    'other': 'Other Organizations'\n",
    "}\n",
    "\n",
    "# Map the short names to full names\n",
    "org_totals['Organization'] = org_totals['Organization Type'].map(org_labels)\n",
    "\n",
    "# Sort by total incidents\n",
    "org_totals = org_totals.sort_values('Total Incidents', ascending=False)\n",
    "\n",
    "# Create a horizontal bar chart\n",
    "fig_orgs = px.bar(\n",
    "    org_totals,\n",
    "    y='Organization',\n",
    "    x='Total Incidents',\n",
    "    title=None,\n",
    "    height=500,\n",
    "    orientation='h'\n",
    ")\n",
    "\n",
    "# Set all bars to primary color\n",
    "fig_orgs.update_traces(marker_color=palette[\"primary\"])\n",
    "\n",
    "# Improve layout\n",
    "fig_orgs.update_layout(\n",
    "    yaxis_title=None,\n",
    "    xaxis_title=\"Number of Incidents\",\n",
    "    yaxis={'categoryorder': 'total ascending'}\n",
    ")\n",
    "\n",
    "fig_orgs.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "5f86535b",
   "metadata": {},
   "source": [
    "### Analysis of Organizational Impact\n",
    "\n",
    "## Comparison of Actor Types\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "fig-actors",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>                            <div id=\"1c849805-9d57-4f58-a9d8-6d978c63809b\" class=\"plotly-graph-div\" style=\"height:450px; width:100%;\"></div>            <script type=\"text/javascript\">                require([\"plotly\"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById(\"1c849805-9d57-4f58-a9d8-6d978c63809b\")) {                    Plotly.newPlot(                        \"1c849805-9d57-4f58-a9d8-6d978c63809b\",                        [{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Actor Type=%{x}\\u003cbr\\u003eCount=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#FFBD59\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"textposition\":\"auto\",\"x\":[\"Foreign or coalition forces\",\"Host state\"],\"xaxis\":\"x\",\"y\":[109,32],\"yaxis\":\"y\",\"type\":\"bar\"}],                        {\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Number of Incidents\"}},\"legend\":{\"tracegroupgap\":0},\"barmode\":\"relative\",\"height\":450},                        {\"responsive\": true}                    ).then(function(){\n",
       "                            \n",
       "var gd = document.getElementById('1c849805-9d57-4f58-a9d8-6d978c63809b');\n",
       "var x = new MutationObserver(function (mutations, observer) {{\n",
       "        var display = window.getComputedStyle(gd).display;\n",
       "        if (!display || display === 'none') {{\n",
       "            console.log([gd, 'removed!']);\n",
       "            Plotly.purge(gd);\n",
       "            observer.disconnect();\n",
       "        }}\n",
       "}});\n",
       "\n",
       "// Listen for the removal of the full notebook cells\n",
       "var notebookContainer = gd.closest('#notebook-container');\n",
       "if (notebookContainer) {{\n",
       "    x.observe(notebookContainer, {childList: true});\n",
       "}}\n",
       "\n",
       "// Listen for the clearing of the current output cell\n",
       "var outputEl = gd.closest('.output');\n",
       "if (outputEl) {{\n",
       "    x.observe(outputEl, {childList: true});\n",
       "}}\n",
       "\n",
       "                        })                };                });            </script>        </div>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "#| label: fig-actors\n",
    "#| fig-cap: Host State vs Foreign Actors in Security Incidents\n",
    "#| echo: false\n",
    "\n",
    "# Filter only for Host State and Foreign actors\n",
    "relevant_actors = ['Host state', 'Foreign or coalition forces']\n",
    "actor_data = country_data[country_data['actor_type'].isin(relevant_actors)]\n",
    "\n",
    "# Check if we have data for these specific actors\n",
    "if len(actor_data) > 0:\n",
    "    actor_counts = actor_data['actor_type'].value_counts().reset_index()\n",
    "    actor_counts.columns = ['Actor Type', 'Count']\n",
    "    \n",
    "    # Create a column chart\n",
    "    fig_actors = px.bar(\n",
    "        actor_counts,\n",
    "        x='Actor Type',\n",
    "        y='Count',\n",
    "        title=None,\n",
    "        height=450\n",
    "    )\n",
    "    \n",
    "    # Set primary color for all bars\n",
    "    fig_actors.update_traces(marker_color=palette[\"primary\"])\n",
    "    \n",
    "    # Improve layout\n",
    "    fig_actors.update_layout(\n",
    "        xaxis_title=None,\n",
    "        yaxis_title=\"Number of Incidents\"\n",
    "    )\n",
    "    \n",
    "    fig_actors.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "117fcd3c",
   "metadata": {},
   "source": [
    "### Analysis of Actor Responsibility\n",
    "\n",
    "# Major Incidents {#sec-major}\n",
    "\n",
    "## Top 5 Most Impactful Security Incidents\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "id": "tbl-top-incidents",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Year</th>\n",
       "      <th>Location</th>\n",
       "      <th>Total Affected</th>\n",
       "      <th>Killed</th>\n",
       "      <th>Wounded</th>\n",
       "      <th>Context</th>\n",
       "      <th>Actor Type</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>1546</th>\n",
       "      <td>2013</td>\n",
       "      <td>Project site</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>11</td>\n",
       "      <td>Combat/Crossfire</td>\n",
       "      <td>Unknown</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2020</th>\n",
       "      <td>2016</td>\n",
       "      <td>Project site</td>\n",
       "      <td>9</td>\n",
       "      <td>9</td>\n",
       "      <td>0</td>\n",
       "      <td>Combat/Crossfire</td>\n",
       "      <td>Foreign or coalition forces</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2216</th>\n",
       "      <td>2017</td>\n",
       "      <td>Office/compound</td>\n",
       "      <td>9</td>\n",
       "      <td>9</td>\n",
       "      <td>0</td>\n",
       "      <td>Combat/Crossfire</td>\n",
       "      <td>Foreign or coalition forces</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3234</th>\n",
       "      <td>2021</td>\n",
       "      <td>Project site</td>\n",
       "      <td>8</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>Combat/Crossfire</td>\n",
       "      <td>Unknown</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1604</th>\n",
       "      <td>2013</td>\n",
       "      <td>Road</td>\n",
       "      <td>7</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>Ambush</td>\n",
       "      <td>Non-state armed group: Global</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "      Year         Location  Total Affected  Killed  Wounded  \\\n",
       "1546  2013     Project site              11       0       11   \n",
       "2020  2016     Project site               9       9        0   \n",
       "2216  2017  Office/compound               9       9        0   \n",
       "3234  2021     Project site               8       4        4   \n",
       "1604  2013             Road               7       0        0   \n",
       "\n",
       "               Context                      Actor Type  \n",
       "1546  Combat/Crossfire                         Unknown  \n",
       "2020  Combat/Crossfire     Foreign or coalition forces  \n",
       "2216  Combat/Crossfire     Foreign or coalition forces  \n",
       "3234  Combat/Crossfire                         Unknown  \n",
       "1604            Ambush  Non-state armed group: Global   "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "#| label: tbl-top-incidents\n",
    "#| tbl-cap: Most impactful security incidents in Palestine (by total affected)\n",
    "#| echo: false\n",
    "\n",
    "if not country_data.empty and 'total_affected' in country_data.columns:\n",
    "    top5_incidents = country_data.sort_values(by='total_affected', ascending=False).head(5)\n",
    "    \n",
    "    # Select and rename columns for display\n",
    "    display_cols = ['year', 'location', 'total_affected', 'total_killed', 'total_wounded', 'attack_context', 'actor_type']\n",
    "    column_names = {\n",
    "        'year': 'Year', \n",
    "        'location': 'Location', \n",
    "        'total_affected': 'Total Affected',\n",
    "        'total_killed': 'Killed', \n",
    "        'total_wounded': 'Wounded',\n",
    "        'attack_context': 'Context',\n",
    "        'actor_type': 'Actor Type'\n",
    "    }\n",
    "    \n",
    "    display_df = top5_incidents[display_cols].rename(columns=column_names)\n",
    "    display(display_df)"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "4a168178",
   "metadata": {},
   "source": [
    "### Analysis of Major Incidents\n",
    "\n",
    "# Conclusions and Recommendations {#sec-conclusions}\n",
    "\n",
    "## Key Findings\n",
    "\n",
    "## Recommendations\n",
    "\n",
    "### For Security Planning\n",
    "\n",
    "### For Humanitarian Organizations\n",
    "\n",
    "### For Policy Development\n",
    "\n",
    "### For Future Research"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3",
   "path": "/opt/miniconda3/share/jupyter/kernels/python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.12.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
